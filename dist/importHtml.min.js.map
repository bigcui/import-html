{"version":3,"file":"importHtml.min.js","sources":["../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/typeof.js","../src/util.js","../src/main.js"],"sourcesContent":["function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","import _typeof from \"@babel/runtime/helpers/typeof\";\n\n/**\n * @author Kuitos\n * @homepage https://github.com/kuitos/\n * @since 2019-02-25\n * fork from https://github.com/systemjs/systemjs/blob/master/src/extras/global.js\n */\nvar isIE11 = typeof navigator !== 'undefined' && navigator.userAgent.indexOf('Trident') !== -1;\n\nfunction shouldSkipProperty(global, p) {\n  if (!global.hasOwnProperty(p) || !isNaN(p) && p < global.length) return true;\n\n  if (isIE11) {\n    // https://github.com/kuitos/import-html-entry/pull/32，最小化 try 范围\n    try {\n      return global[p] && global[p].parent === window;\n    } catch (err) {\n      return true;\n    }\n  } else {\n    return false;\n  }\n} // safari unpredictably lists some new globals first or second in object order\n\n\nvar firstGlobalProp, secondGlobalProp, lastGlobalProp;\nexport function getGlobalProp(global) {\n  var cnt = 0;\n  var lastProp;\n  var hasIframe = false;\n\n  for (var p in global) {\n    if (shouldSkipProperty(global, p)) continue; // 遍历 iframe，检查 window 上的属性值是否是 iframe，是则跳过后面的 first 和 second 判断\n\n    for (var i = 0; i < window.frames.length && !hasIframe; i++) {\n      var frame = window.frames[i];\n\n      if (frame === global[p]) {\n        hasIframe = true;\n        break;\n      }\n    }\n\n    if (!hasIframe && (cnt === 0 && p !== firstGlobalProp || cnt === 1 && p !== secondGlobalProp)) return p;\n    cnt++;\n    lastProp = p;\n  }\n\n  if (lastProp !== lastGlobalProp) return lastProp;\n}\nexport function noteGlobalProps(global) {\n  // alternatively Object.keys(global).pop()\n  // but this may be faster (pending benchmarks)\n  firstGlobalProp = secondGlobalProp = undefined;\n\n  for (var p in global) {\n    if (shouldSkipProperty(global, p)) continue;\n    if (!firstGlobalProp) firstGlobalProp = p;else if (!secondGlobalProp) secondGlobalProp = p;\n    lastGlobalProp = p;\n  }\n\n  return lastGlobalProp;\n}\nexport function getInlineCode(match) {\n  var start = match.indexOf('>') + 1;\n  var end = match.lastIndexOf('<');\n  return match.substring(start, end);\n}\nexport function defaultGetPublicPath(entry) {\n  if (_typeof(entry) === 'object') {\n    return '/';\n  }\n\n  try {\n    // URL 构造函数不支持使用 // 前缀的 url\n    var _URL = new URL(entry.startsWith('//') ? \"\".concat(location.protocol).concat(entry) : entry, location.href),\n        origin = _URL.origin,\n        pathname = _URL.pathname;\n\n    var paths = pathname.split('/'); // 移除最后一个元素\n\n    paths.pop();\n    return \"\".concat(origin).concat(paths.join('/'), \"/\");\n  } catch (e) {\n    console.warn(e);\n    return '';\n  }\n} // Detect whether browser supports `<script type=module>` or not\n\nexport function isModuleScriptSupported() {\n  var s = document.createElement('script');\n  return 'noModule' in s;\n} // RIC and shim for browsers setTimeout() without it\n\nexport var requestIdleCallback = window.requestIdleCallback || function requestIdleCallback(cb) {\n  var start = Date.now();\n  return setTimeout(function () {\n    cb({\n      didTimeout: false,\n      timeRemaining: function timeRemaining() {\n        return Math.max(0, 50 - (Date.now() - start));\n      }\n    });\n  }, 1);\n};","/**\n* @file some code  cp https://github.com/kuitos/\n* @author bigcui\n* 2020-10-12\n*/\n\n/* eslint-enable */\n\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport {getInlineCode, isModuleScriptSupported} from './util';\nconst ALL_SCRIPT_REGEX = /(<script[\\s\\S]*?>)[\\s\\S]*?<\\/script>/gi;\nconst SCRIPT_TAG_REGEX = /<(script)[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+((?!type=('|')text\\/ng\\x2Dtemplate\\3)[\\s\\S])*?>[\\s\\S]*?<\\/\\1>/i;\nconst SCRIPT_SRC_REGEX = /.*\\ssrc=('|\")?([^>'\"\\s]+)/;\nconst SCRIPT_TYPE_REGEX = /.*\\stype=('|\")?([^>'\"\\s]+)/;\nconst SCRIPT_ENTRY_REGEX = /.*\\sentry\\s*.*/;\nconst SCRIPT_ASYNC_REGEX = /.*\\sasync\\s*.*/;\nconst SCRIPT_NO_MODULE_REGEX = /.*\\snomodule\\s*.*/;\nconst SCRIPT_MODULE_REGEX = /.*\\stype=('|\")?module('|\")?\\s*.*/;\nconst LINK_TAG_REGEX = /<(link)[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+[\\s\\S]*?>/ig;\nconst LINK_PRELOAD_OR_PREFETCH_REGEX = /\\srel=('|\")?(preload|prefetch)\\1/;\nconst LINK_HREF_REGEX = /.*\\shref=('|\")?([^>'\"\\s]+)/;\nconst LINK_AS_FONT = /.*\\sas=('|\")?font\\1.*/;\nconst STYLE_TAG_REGEX = /<style[^>]*>[\\s\\S]*?<\\/style>/gi;\nconst STYLE_TYPE_REGEX = /\\s+rel=('|\")?stylesheet\\1.*/;\nconst STYLE_HREF_REGEX = /.*\\shref=('|\")?([^>'\"\\s]+)/;\nconst HTML_COMMENT_REGEX = /<!--([\\s\\S]*?)-->/g;\nconst LINK_IGNORE_REGEX = /<link([\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+|[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+[\\s\\S]+[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+)ignore([\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]*|[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+[\\s\\S]*|=[\\s\\S]*)>/i;\nconst STYLE_IGNORE_REGEX = /<style([\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+|[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+[\\s\\S]+[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+)ignore([\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]*|[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+[\\s\\S]*|=[\\s\\S]*)>/i;\nconst SCRIPT_IGNORE_REGEX = /<script([\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+|[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+[\\s\\S]+[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+)ignore([\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]*|[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+[\\s\\S]*|=[\\s\\S]*)>/i;\n\nfunction hasProtocol(url) {\n    return url.startsWith('//') || url.startsWith('http://') || url.startsWith('https://');\n}\n\nfunction getEntirePath(path, baseURI) {\n\n    if (location.href.startsWith('file')) {\n        return path;\n    }\n\n    return new URL(path, baseURI).toString();\n}\n\nfunction isValidJavaScriptType(type) {\n    var handleTypes = ['text/javascript', 'module', 'application/javascript', 'text/ecmascript', 'application/ecmascript'];\n    return !type || handleTypes.indexOf(type) !== -1;\n}\n\nexport var genLinkReplaceSymbol = function genLinkReplaceSymbol(linkHref) {\n    var preloadOrPrefetch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    return '<!-- '.concat(preloadOrPrefetch ? 'prefetch/preload' : '', ' link ').concat(linkHref, ' replaced by import-html-entry -->');\n};\nexport var genIgnoreAssetReplaceSymbol = function genIgnoreAssetReplaceSymbol(url) {\n    return '<!-- ignore asset '.concat(url || 'file', ' replaced by import-html-entry -->');\n};\nexport var genModuleScriptReplaceSymbol = function genModuleScriptReplaceSymbol(scriptSrc, moduleSupport) {\n    return '<!-- '.concat(moduleSupport ? 'nomodule' : 'module', ' script ').concat(scriptSrc, ' ignored by import-html-entry -->');\n};\nexport function requestHtml(url) {\n\n    let useragent = navigator.userAgent.includes('Android');\n    if (useragent || !navigator.userAgent.includes('iPhone')) {\n        return new Promise((resolve, reject) => {\n\n            var request = new XMLHttpRequest();\n            var method = 'GET';\n\n            request.open(method, url);\n            request.send(null);\n            request.onreadystatechange = function () {\n                if (request.readyState == 4) {\n                    resolve(request.responseText);\n                }\n                else {\n                    reject('ajax error'+ request.readyState +'-'+ request.status);\n                }\n\n            };\n        });\n    }\n    else {\n        return new Promise((resolve, reject) => {\n            fetch(url).then(function (response) {\n                return response.text();\n            }).then(data => {\n                resolve(data);\n            }).catch(e => {\n                console.error('fetch', e);\n            });\n        });\n    }\n}\n/**\n * parse the script link from the template\n * 1. collect stylesheets\n * 2. use global eval to evaluate the inline scripts\n *    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function#Difference_between_Function_constructor_and_function_declaration\n *    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#Do_not_ever_use_eval!\n * @param tpl\n * @param baseURI\n * @stripStyles whether to strip the css links\n * @returns {{template: void | string | *, scripts: *[], entry: *}}\n */\n\nexport default function processTpl(tpl, baseURI) {\n    var scripts = [];\n    var styles = [];\n    var entry = null;\n    var moduleSupport = isModuleScriptSupported();\n    var template = tpl\n\n        /*\n        remove html comment first\n        */\n        .replace(HTML_COMMENT_REGEX, '').replace(LINK_TAG_REGEX, function (match) {\n\n        /*\n        change the css link\n        */\n\n        var styleType = !!match.match(STYLE_TYPE_REGEX);\n\n        if (styleType) {\n            var styleHref = match.match(STYLE_HREF_REGEX);\n            var styleIgnore = match.match(LINK_IGNORE_REGEX);\n\n            if (styleHref) {\n                var href = styleHref && styleHref[2];\n                var newHref = href;\n\n                if (href && !hasProtocol(href)) {\n                    newHref = getEntirePath(href, baseURI);\n                }\n\n                if (styleIgnore) {\n                    return genIgnoreAssetReplaceSymbol(newHref);\n                }\n\n                styles.push(newHref);\n                return genLinkReplaceSymbol(newHref);\n            }\n        }\n\n        var preloadOrPrefetchType = match.match(LINK_PRELOAD_OR_PREFETCH_REGEX) && match.match(LINK_HREF_REGEX) && !match.match(LINK_AS_FONT);\n\n        if (preloadOrPrefetchType) {\n            var _match$match = match.match(LINK_HREF_REGEX),\n                _match$match2 = _slicedToArray(_match$match, 3),\n                linkHref = _match$match2[2];\n            styles.push(linkHref);\n            return genLinkReplaceSymbol(linkHref, true);\n        }\n\n        return match;\n    }).replace(STYLE_TAG_REGEX, function (match) {\n        if (STYLE_IGNORE_REGEX.test(match)) {\n            return genIgnoreAssetReplaceSymbol('style file');\n        }\n\n        if (!!match.match(STYLE_TAG_REGEX)) {\n            styles.push(match);\n        }\n\n        return match;\n    }).replace(ALL_SCRIPT_REGEX, function (match, scriptTag) {\n        var scriptIgnore = scriptTag.match(SCRIPT_IGNORE_REGEX);\n        var moduleScriptIgnore = moduleSupport && !!scriptTag.match(SCRIPT_NO_MODULE_REGEX) || !moduleSupport && !!scriptTag.match(SCRIPT_MODULE_REGEX); // in order to keep the exec order of all javascripts\n        var matchedScriptTypeMatch = scriptTag.match(SCRIPT_TYPE_REGEX);\n        var matchedScriptType = matchedScriptTypeMatch && matchedScriptTypeMatch[2];\n\n        if (!isValidJavaScriptType(matchedScriptType)) {\n\n            return match;\n        } // if it is a external script\n\n        if (SCRIPT_TAG_REGEX.test(match) && scriptTag.match(SCRIPT_SRC_REGEX)) {\n\n            /*\n            collect scripts and replace the ref\n            */\n            var matchedScriptEntry = scriptTag.match(SCRIPT_ENTRY_REGEX);\n            var matchedScriptSrcMatch = scriptTag.match(SCRIPT_SRC_REGEX);\n            var matchedScriptSrc = matchedScriptSrcMatch && matchedScriptSrcMatch[2];\n\n            if (entry && matchedScriptEntry) {\n                throw new SyntaxError('You should not set multiply entry script!');\n            }\n            else {\n                // append the domain while the script not have an protocol prefix\n                if (matchedScriptSrc && !hasProtocol(matchedScriptSrc)) {\n                    matchedScriptSrc = getEntirePath(matchedScriptSrc, baseURI);\n                }\n\n                entry = entry || matchedScriptEntry && matchedScriptSrc;\n            }\n\n            if (scriptIgnore) {\n                return genIgnoreAssetReplaceSymbol(matchedScriptSrc || 'js file');\n            }\n\n            if (moduleScriptIgnore) {\n                return genModuleScriptReplaceSymbol(matchedScriptSrc || 'js file', moduleSupport);\n            }\n\n            if (matchedScriptSrc) {\n                var asyncScript = !!scriptTag.match(SCRIPT_ASYNC_REGEX);\n                scripts.push(asyncScript ? {\n                    async: true,\n                    src: matchedScriptSrc\n                } : matchedScriptSrc);\n            }\n\n            return match;\n        }\n        else {\n            if (scriptIgnore) {\n                return genIgnoreAssetReplaceSymbol('js file');\n            }\n\n            if (moduleScriptIgnore) {\n                return genModuleScriptReplaceSymbol('js file', moduleSupport);\n            } // if it is an inline script\n\n            var code = getInlineCode(match); // remove script blocks when all of these lines are comments.\n\n            var isPureCommentBlock = code.split(/[\\r\\n]+/).every(function (line) {\n                return !line.trim() || line.trim().startsWith('//');\n            });\n\n            if (!isPureCommentBlock) {\n                scripts.push(match);\n            }\n        }\n    });\n    scripts = scripts.filter(function (script) {\n        // filter empty script\n        return !!script;\n    });\n    return {\n        template: template,\n        scripts: scripts,\n        styles: styles,\n        // set the last script as entry if have not set\n        entry: entry || scripts[scripts.length - 1]\n    };\n}\n"],"names":["isIE11","navigator","userAgent","indexOf","getInlineCode","match","start","end","lastIndexOf","substring","isModuleScriptSupported","s","document","createElement","ALL_SCRIPT_REGEX","SCRIPT_TAG_REGEX","SCRIPT_SRC_REGEX","SCRIPT_TYPE_REGEX","SCRIPT_ENTRY_REGEX","SCRIPT_ASYNC_REGEX","SCRIPT_NO_MODULE_REGEX","SCRIPT_MODULE_REGEX","LINK_TAG_REGEX","LINK_PRELOAD_OR_PREFETCH_REGEX","LINK_HREF_REGEX","LINK_AS_FONT","STYLE_TAG_REGEX","STYLE_TYPE_REGEX","STYLE_HREF_REGEX","HTML_COMMENT_REGEX","LINK_IGNORE_REGEX","STYLE_IGNORE_REGEX","SCRIPT_IGNORE_REGEX","hasProtocol","url","startsWith","getEntirePath","path","baseURI","location","href","URL","toString","isValidJavaScriptType","type","handleTypes","genLinkReplaceSymbol","linkHref","preloadOrPrefetch","arguments","length","undefined","concat","genIgnoreAssetReplaceSymbol","genModuleScriptReplaceSymbol","scriptSrc","moduleSupport","requestHtml","useragent","includes","Promise","resolve","reject","request","XMLHttpRequest","method","open","send","onreadystatechange","readyState","responseText","status","fetch","then","response","text","data","e","console","error","processTpl","tpl","scripts","styles","entry","template","replace","styleType","styleHref","styleIgnore","newHref","push","preloadOrPrefetchType","_match$match","_match$match2","_slicedToArray","test","scriptTag","scriptIgnore","moduleScriptIgnore","matchedScriptTypeMatch","matchedScriptType","matchedScriptEntry","matchedScriptSrcMatch","matchedScriptSrc","SyntaxError","asyncScript","async","src","code","isPureCommentBlock","split","every","line","trim","filter","script"],"mappings":"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"}